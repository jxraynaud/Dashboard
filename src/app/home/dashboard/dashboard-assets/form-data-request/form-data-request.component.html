<md-card>
  <td-expansion-panel #expansionRequestParams label="label" sublabel="sublabel">
    <ng-template td-expansion-panel-header>
        <md-card-title>
          <md-icon *ngIf="expansionRequestParams.expand">expand_more</md-icon>
          <md-icon *ngIf="!expansionRequestParams.expand">chevron_right</md-icon>
          Data request parameter
        </md-card-title>
    </ng-template>
    <td-expansion-summary>
        <section>
          Displaying data from {{ dateRange.startDate | date:'M/dd/y' }} to {{ dateRange.endDate | date:'M/dd/y' }}, for models
          <span *ngFor="let modelObject of attributionModelsMapping">
            <span *ngIf="selectedAttributionModel_s && selectedAttributionModel_s.length>0 && selectedAttributionModel_s.indexOf( modelObject.id )!=-1">
              {{ modelObject.name }},
            </span>
          </span>
        </section>
    </td-expansion-summary>

    <section>
        <h4>Date</h4>
        <div class="input-group" daterangepicker [options]="options" (selected)="selectedDate($event)" >
            <span class="form-control uneditable-input"  name="daterange" >
                {{ dateRange.startDate | date:'M/dd/y' }} - {{ dateRange.endDate | date:'M/dd/y' }}
            </span>
            <span class="input-group-btn">
                <a type="button" class="btn btn-default"><i class="glyphicon glyphicon-calendar"></i></a>
            </span>
        </div>
    </section>

    <section *ngIf="!isAttributionModelMultiple">
        <md-select placeholder="Attribution model" #modelChoice (change)="changeModel($event.value)" name="attributionModel" [(ngModel)]="selectedAttributionModel_s" >
          <!-- <md-option  *ngFor="let model of attributionModels"
                     [value]="model.id">{{ model.name }} ( {{ model.id }} ) </md-option>
                     <md-option [value]="2">Modlee par d√©faut</md-option>
                     <md-option [value]="5">Modlee 5</md-option>-->

                     <ng-template ngFor let-modelObject [ngForOf]="attributionModelsMapping">
                       <md-option
                          *ngIf="modelObject.is_active" [value]="modelObject.id"
                          [attr.selected]="selectedAttributionModel_s==modelObject.id">
                       >
                            {{ modelObject.name }} - {{ modelObject.id }}
                       </md-option>
                    </ng-template>
        </md-select>
    </section>

    <section *ngIf="isAttributionModelMultiple" class="example-section">
        <h4>Attribution models</h4>
        <md-list>
          <ng-template ngFor let-modelObject [ngForOf]="attributionModelsMapping">
            <md-list-item *ngIf="modelObject.is_active">
                <md-checkbox [checked]="selectedAttributionModel_s && selectedAttributionModel_s.length>0 && selectedAttributionModel_s.indexOf( modelObject.id )!=-1"
                  (change)="changeModelsMultiple($event,modelObject.id)">
                   {{ modelObject.name }} - {{ modelObject.id }}
                </md-checkbox>
            </md-list-item>
          </ng-template>
        </md-list>
        <md-chip *ngIf="lessThan2Selectedmodels"
            [selected]="true"
            color="warn">
            Please choose at least 2 models
        </md-chip>
    </section>
</td-expansion-panel>
<md-card>
